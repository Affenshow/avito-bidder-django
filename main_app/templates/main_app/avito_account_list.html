{% extends 'base.html' %}
{% block title %}Мои аккаунты Avito{% endblock %}
{% block page_title %}Мои аккаунты Avito{% endblock %}

{% block content %}
<div class="accounts-b2b-wrap" style="max-width:1080px;margin:0 auto 2.7em;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:2.4em;">
        <h2 style="margin:0;font-size:2.14em;color:#22577b;font-weight:800;letter-spacing:-.02em;">Мои аккаунты Avito</h2>
        <a href="{% url 'avito-account-add' %}" class="btn btn-primary" style="padding:.9em 2.3em;font-size:1.1em;border-radius:11px;background:linear-gradient(90deg,#38a3a5,#1ebe67);box-shadow:0 2px 14px #2091870f;">
            <i class="fas fa-plus"></i> Добавить аккаунт
        </a>
    </div>
    {% if accounts %}
        <div class="accounts-b2b-grid" style="display:grid;grid-gap:2.15em 2em;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));">
            {% for acc in accounts %}
                <div class="account-b2b-card" style="padding:1.8em 2em 1.25em;background:#fff;border-radius:19px;box-shadow:0 8px 36px 0 #24bfc71b,0 2px 10px #2240770f;display:flex;flex-direction:column;transition:.17s box-shadow,background;position:relative;">
                    <div style="display:flex;align-items:center;gap:.85em;">
                        <div style="background:linear-gradient(45deg,#38a3a526,#1ebe672a);border-radius:50%;padding:12px;display:flex;align-items:center;justify-content:center;">
                            <i class="fas fa-user-tie" style="color:#38a3a5;font-size:1.59em;"></i>
                        </div>
                        <span style="font-weight:700;font-size:1.28em;color:#21477b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
                            {{ acc.name }}
                        </span>
                    </div>
                    <div style="margin:.94em 0 .8em;">
                        <div style="color:#7890aa;font-size:.98em;">Баланс</div>
                        <span style="font-weight:700;font-size:1.11em;color:#22b87d;">{% if acc.real_balance is not None %}{{ acc.real_balance|floatformat:0 }} ₽{% else %}<span style="color:#e06363">Нет данных</span>{% endif %}</span>
                        <br>
                        <span style="color:#7890aa;font-size:.98em;">Аванс</span>
                        <span style="font-weight:700;font-size:1.07em;color:#38a3a5;margin-left:.16em;">
                            {% if acc.bonus_balance is not None %}{{ acc.bonus_balance|floatformat:0 }} ₽{% else %}<span style="color:#e06363;">Нет данных</span>{% endif %}
                        </span>
                    </div>
                    <div style="display:flex;gap:.7em;margin-top:auto;">
                        <a href="{% url 'avito-account-edit' acc.pk %}" class="btn btn-outline-primary" style="border-radius:7px;padding:.68em 1.3em;font-weight:500;transition:.14s;background:#f7fafc;">
                            <i class="fas fa-pen"></i> Редактировать
                        </a>
                        <a href="{% url 'avito-account-delete' acc.pk %}" class="btn btn-outline-danger" style="border-radius:7px;padding:.68em 1.3em;font-weight:500;transition:.14s;background:#fff2f2;">
                            <i class="fas fa-trash-alt"></i> Удалить
                        </a>
                    </div>
                    <span style="position:absolute;top:23px;right:23px;color:#b9c7dd;font-size:1.3em;opacity:.13;">
                        <i class="fab fa-avianex"></i>
                    </span>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-5" style="margin-top:5em;">
            <p class="lead text-muted" style="font-size:1.15em;">У вас пока нет аккаунтов Avito</p>
            <a href="{% url 'avito-account-add' %}" class="btn btn-primary" style="padding:1em 2.3em;font-size:1.14em;">Добавить первый аккаунт</a>
        </div>
    {% endif %}
</div>
<style>
@media (max-width: 900px) {
    .accounts-b2b-wrap {padding-left:8px; padding-right:8px;}
    .accounts-b2b-grid {
        grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
        grid-gap: 1.2em 1em;
    }
    .account-b2b-card {padding:1.25em 1.1em 1.05em;}
}
@media (max-width:600px) {
    .accounts-b2b-wrap {padding-left:2px; padding-right:2px;}
    .accounts-b2b-grid {
        grid-template-columns:1fr;
        grid-gap: .7em;
    }
    .account-b2b-card {
        border-radius:13px;
        box-shadow:0 4px 16px #2091870c;
        padding:.72em .7em;
    }
    .accounts-b2b-wrap h2 {font-size:1.22em;}
}
</style>
{% endblock %}
